# ğŸŒ‘ ShadowFund

> **AI-Powered Privacy-First Hedge Fund on Solana**

Zero-knowledge treasury management with Gemini AI strategy, USD1 stablecoin, and ShadowWire privacy.

[![Solana](https://img.shields.io/badge/Solana-Mainnet%20Ready-9945FF?style=flat&logo=solana)](https://solana.com)
[![USD1](https://img.shields.io/badge/USD1-Native%20Integration-FFD700?style=flat)](https://usd1.io)
[![ShadowWire](https://img.shields.io/badge/ShadowWire-ZK%20Privacy-000000?style=flat)](https://radr.dev)
[![Gemini AI](https://img.shields.io/badge/Gemini%203-AI%20Strategy-4285F4?style=flat&logo=google)](https://ai.google.dev)

ğŸš€ **Live Demo**: [https://shadow-fund-gamma.vercel.app/](https://shadow-fund-gamma.vercel.app/)

---

## âœ¨ What is ShadowFund?

ShadowFund is a **non-custodial, AI-managed hedge fund** where:

- **Privacy comes first** â€” All transfers use ZK proofs via ShadowWire
- **AI decides allocation** â€” Gemini 3 Flash analyzes markets in real-time
- **USD1 is native** â€” Zero-log stablecoin as the universal unit of account
- **You keep your keys** â€” User signs all transactions with their own wallet

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SHADOWFUND ARCHITECTURE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚     USER WALLET                     AI STRATEGY ENGINE               â”‚
â”‚         â”‚                                  â”‚                         â”‚
â”‚         â”‚    USD1 Deposit                  â”‚  Gemini 3 Flash         â”‚
â”‚         â–¼                                  â”‚  Market Analysis        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â–¼                         â”‚
â”‚    â”‚ SHADOW  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚  WIRE   â”‚   ZK-Private Transfers                         â”‚      â”‚
â”‚    â”‚   SDK   â”‚                                                â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                â”‚      â”‚
â”‚         â”‚                                                     â”‚      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚    â”‚                    4 VAULTS                          â”‚    â”‚      â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚      â”‚
â”‚    â”‚ RESERVE  â”‚  YIELD   â”‚  GROWTH  â”‚       DEGEN        â”‚    â”‚      â”‚
â”‚    â”‚   40%    â”‚   30%    â”‚   20%    â”‚        10%         â”‚    â”‚      â”‚
â”‚    â”‚          â”‚          â”‚          â”‚                    â”‚    â”‚      â”‚
â”‚    â”‚  Pure    â”‚  Kamino  â”‚ Jupiter  â”‚    Jupiter         â”‚    â”‚      â”‚
â”‚    â”‚  USD1    â”‚  Lending â”‚ SOL/RADR â”‚    Memecoins       â”‚    â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚                              â”‚                                â”‚      â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                         Position Memos On-Chain                      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ† USD1 Integration â€” Core Primitive

**USD1 isn't just "supported" â€” it's the foundation.**

| Feature | Implementation |
|---------|---------------|
| **Unit of Account** | All vaults denominate in USD1 |
| **Deposit** | User â†’ ShadowWire shielded USD1 |
| **Yield** | USD1 â†’ Kamino lending pools |
| **Swaps** | USD1 â†” tokens via Jupiter |
| **Withdraw** | Tokens â†’ USD1 â†’ User wallet |
| **Non-Logging** | Zero USD1 amounts in logs |

**USD1 Mint:** `USD1ttGY1N17NEEHLmELoaybftRBUSErhqYiQzvEmuB`

---

## âš¡ Feature Status

### âœ… Production Ready

| Component | Technology | Status |
|-----------|------------|--------|
| **ZK Deposits** | ShadowWire SDK | âœ… Working |
| **ZK Withdrawals** | ShadowWire SDK | âœ… Working |
| **ZK Transfers** | ShadowWire SDK | âœ… Working |
| **AI Strategy** | Gemini 3 Flash | âœ… Working |
| **Reserve Vault** | Pure USD1 | âœ… Working |
| **Yield Vault** | Kamino Finance | âœ… Working |
| **Growth Vault** | Jupiter Swaps | âœ… Working |
| **Degen Vault** | Jupiter Swaps | âœ… Working |
| **Position Persistence** | Solana Memo Program | âœ… Working |
| **User Wallet Mode** | Browser Signing | âœ… Working |
| **Non-Logging** | Redacted Logger | âœ… Working |

### ğŸ”— Decentralized Position Tracking

Positions are stored **on-chain** using Solana's Memo Program:

```
SHADOWFUND|growth|open|SOL|So1111...|0.5|145.20|1706097600000
   â†‘         â†‘     â†‘    â†‘     â†‘      â†‘     â†‘         â†‘
 prefix   vault  action token mint  amount price  timestamp
```

**How it works:**
1. Memos attached to every trade transaction
2. Positions reconstructed from transaction history on reconnect
3. No database needed â€” fully decentralized
4. Works across devices and survives server restarts

---

## ğŸ—‚ï¸ Project Structure

```
shadowfund/
â”œâ”€â”€ ğŸ“‚ Frontend (Vite + React + TypeScript)
â”‚   â”œâ”€â”€ App.tsx                 # Main app with wallet provider
â”‚   â”œâ”€â”€ LandingPage.tsx         # Marketing landing
â”‚   â”œâ”€â”€ WalletConnect.tsx       # Solana wallet connection
â”‚   â”œâ”€â”€ Dashboard.tsx           # Treasury console
â”‚   â”œâ”€â”€ AIStrategy.tsx          # AI strategy terminal
â”‚   â”œâ”€â”€ TechOverview.tsx        # Architecture & audit page
â”‚   â”œâ”€â”€ polyfills.ts            # Browser Buffer polyfill
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”œâ”€â”€ WalletProvider.tsx      # Solana adapter context
â”‚   â”‚   â””â”€â”€ ShadowFundContext.tsx   # Global state
â”‚   â””â”€â”€ services/api.ts         # Backend API client
â”‚
â””â”€â”€ ğŸ“‚ backend/ (Next.js API)
    â”œâ”€â”€ pages/api/
    â”‚   â”œâ”€â”€ treasury.ts         # GET treasury state
    â”‚   â”œâ”€â”€ strategy.ts         # GET AI recommendations
    â”‚   â”œâ”€â”€ rebalance.ts        # POST execute rebalance
    â”‚   â”œâ”€â”€ transfer.ts         # POST deposit/withdraw
    â”‚   â””â”€â”€ verify.ts           # GET verify ZK proof
    â””â”€â”€ lib/
        â”œâ”€â”€ ai/                 # Gemini AI engine
        â”‚   â”œâ”€â”€ gemini.ts       # Gemini 3 Flash integration
        â”‚   â”œâ”€â”€ signals.ts      # Market data (CoinGecko/DexScreener)
        â”‚   â””â”€â”€ strategy.ts     # Rule-based fallback
        â”œâ”€â”€ protocols/
        â”‚   â”œâ”€â”€ kamino.ts       # Kamino lending (Yield)
        â”‚   â””â”€â”€ jupiter.ts      # Jupiter swaps (Growth/Degen)
        â”œâ”€â”€ strategies/
        â”‚   â”œâ”€â”€ reserve.ts      # Reserve vault logic
        â”‚   â”œâ”€â”€ yield.ts        # Yield vault logic
        â”‚   â”œâ”€â”€ growth.ts       # Growth vault logic
        â”‚   â””â”€â”€ degen.ts        # Degen vault logic
        â”œâ”€â”€ shadowwire.ts       # ShadowWire SDK wrapper
        â”œâ”€â”€ positionMemo.ts     # On-chain position persistence
        â”œâ”€â”€ vaults.ts           # PDA derivation
        â”œâ”€â”€ treasury.ts         # Treasury state
        â””â”€â”€ logger.ts           # Non-logging redactor
```

---

## ğŸš€ Quick Start

### Prerequisites
- Node.js 18+
- Solana wallet (Phantom, Solflare)
- USD1 tokens (mainnet)

### Installation

```bash
# Clone
git clone https://github.com/sunnysolana2003-crypto/ShadowFund.git
cd ShadowFund

# Frontend
npm install

# Backend
cd backend && npm install
```

### Environment Setup

**Backend** (`backend/.env.local`):
```env
# Required
GEMINI_API_KEY=your_gemini_api_key

# Production
NODE_ENV=production
SHADOWWIRE_MOCK=false
SOLANA_RPC_URL=https://your-helius-rpc
```

**Frontend** (`.env.local`):
```env
VITE_API_URL=http://localhost:3001
VITE_SHADOWWIRE_MOCK=true  # For demo mode
```

### Run

```bash
# Terminal 1 - Backend
cd backend && npm run dev

# Terminal 2 - Frontend  
npm run dev
```

---

## ğŸ¯ User Onboarding â€” No Server Wallet Required

**Users sign all transactions with their own wallet:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User     â”‚     â”‚  Backend   â”‚     â”‚   User     â”‚     â”‚  Solana    â”‚
â”‚  Requests  â”‚ â”€â”€â–º â”‚  Builds TX â”‚ â”€â”€â–º â”‚   Signs    â”‚ â”€â”€â–º â”‚  Network   â”‚
â”‚  Deposit   â”‚     â”‚ (unsigned) â”‚     â”‚  (Phantom) â”‚     â”‚  Confirms  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Benefits:**
- âœ… Users keep their private keys
- âœ… No server wallet to fund
- âœ… True non-custodial operation
- âœ… Works immediately for any user

---

## ğŸŒ¾ Vault Strategies

### Reserve (Safe Haven)
- Pure USD1 holdings
- No swaps, maximum safety
- Instant liquidity

### Yield (Kamino Finance)
- USD1 deployed to Kamino lending pools
- Typical APY: 5-15%
- Auto-compounding

### Growth (Jupiter Blue Chips)
| Token | Allocation |
|-------|------------|
| SOL | 40% |
| RADR | 25% |
| ORE | 20% |
| ANON | 15% |

### Degen (Jupiter Memecoins)
| Token | Allocation |
|-------|------------|
| SOL | 30% |
| BONK | 25% |
| RADR | 20% |
| JIM | 15% |
| POKI | 10% |

---

## ğŸ¤– AI Strategy Engine

Powered by **Google Gemini 3 Flash**:

1. **Market Data** â€” SOL price, RSI, volatility (CoinGecko/DexScreener)
2. **AI Analysis** â€” Gemini processes market context + risk profile
3. **Allocation** â€” Returns vault percentages with reasoning
4. **Risk Caps** â€” Hard limits enforced per risk profile
5. **Fallback** â€” Rule-based strategy if AI unavailable

```typescript
// Example AI Response
{
  allocation: { reserve: 30, yield: 40, growth: 20, degen: 10 },
  reasoning: "Neutral market favors yield farming...",
  confidence: 85,
  keyInsights: ["SOL RSI at 45 suggests accumulation"]
}
```

---

## ğŸ” Security

### Non-Logging Policy
| Never Logged | Why |
|--------------|-----|
| Wallet addresses | Privacy |
| USD1 amounts | Privacy |
| Transaction hashes | Privacy |
| Private keys | Security |
| Signatures | Security |

### Wallet Signatures
All operations require Ed25519 signatures with 60s expiry:
```typescript
const message = `rebalance|${wallet}|${timestamp}`;
const signature = await wallet.signMessage(message);
```

### Rate Limiting
- 60 requests/minute per IP
- Auto cleanup every 5 minutes

---

## ğŸ“¡ API Reference

### GET /api/treasury
```bash
curl "http://localhost:3001/api/treasury?wallet=YOUR_WALLET"
```

### GET /api/strategy
```bash
curl "http://localhost:3001/api/strategy?risk=medium"
```

### POST /api/rebalance
```bash
curl -X POST http://localhost:3001/api/rebalance \
  -H "Content-Type: application/json" \
  -d '{"wallet":"...","risk":"medium","signature":"..."}'
```

### POST /api/transfer
```bash
curl -X POST http://localhost:3001/api/transfer \
  -H "Content-Type: application/json" \
  -d '{"wallet":"...","amount":100,"action":"deposit"}'
```

---

## ğŸ­ Demo Mode

The demo runs in simulation mode due to **ShadowWire's anti-spam requirement**:

```
Error: Amount 0.0150 SOL is below minimum 0.1000 SOL per transaction (anti-spam)
```

**ShadowWire requires 0.1 SOL (~$15-20) per transaction.** As a solo developer, I couldn't afford multiple test transactions at this rate.

```env
SHADOWWIRE_MOCK=true
```

This enables high-fidelity simulation that:
- âœ… Shows full UI/UX flow
- âœ… Demonstrates AI strategy
- âœ… Simulates vault operations
- âœ… Maintains realistic balances

**To run live:** Fund wallet with 0.5+ SOL and USD1 tokens.

---

## ğŸ“Š Risk Profiles

| Profile | Reserve Cap | Yield Cap | Growth Cap | Degen Cap |
|---------|-------------|-----------|------------|-----------|
| **Low** | 60% | 50% | 20% | 5% |
| **Medium** | 50% | 60% | 40% | 15% |
| **High** | 30% | 70% | 60% | 30% |

---

## ğŸ—ï¸ Production Deployment

### Vercel (Recommended)

```bash
# Frontend
vercel

# Backend
cd backend && vercel
```

### Environment Variables (Production)

```env
NODE_ENV=production
SHADOWWIRE_MOCK=false
SHADOWWIRE_CLUSTER=mainnet-beta
SOLANA_RPC_URL=https://your-helius-rpc
GEMINI_API_KEY=your_key
CORS_ORIGINS=https://your-frontend.vercel.app
```

---

## ğŸ”— Tech Stack

| Layer | Technology |
|-------|------------|
| **Frontend** | React 18, Vite, TypeScript, Tailwind CSS, Framer Motion |
| **Backend** | Next.js API Routes, TypeScript |
| **Blockchain** | Solana, ShadowWire SDK |
| **DeFi** | Kamino Finance (Klend), Jupiter Aggregator |
| **AI** | Google Gemini 3 Flash |
| **Wallet** | Solana Wallet Adapter (Phantom, Solflare, Ledger) |

---

## ğŸ“œ License

MIT

---

## ğŸ™ Acknowledgments

- **RADR Labs** â€” ShadowWire SDK for ZK privacy
- **USD1 Protocol** â€” Privacy-first stablecoin
- **Kamino Finance** â€” Lending infrastructure
- **Jupiter** â€” DEX aggregation
- **Google AI** â€” Gemini 3 Flash model

---

<div align="center">

**Built for the RADR Hackathon 2026**

*Privacy is not a feature. It's a right.*

</div>
